<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- ...existing code... -->
    <th:block th:fragment="adminHeader(title)">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title th:text="${title} ?: 'Admin - BookingTicket'">Admin</title>
        <!-- Bootstrap CSS (CDN) -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
        <!-- Admin CSS -->
        <link rel="stylesheet" th:href="@{/admin/css/admin.css}" href="/admin/css/admin.css" />
        <!-- Fallback minimal inline CSS to ensure layout remains usable if external CSS fails -->
        <style>
            :root{--brand:#00693E;--sidebar-bg:#f8f9fa;--topbar-bg:#343a40;--muted:#6c757d}
            body{font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; margin:0;color:#212529}
            .admin-topbar{height:56px;display:flex;align-items:center;padding:0 16px;background:var(--topbar-bg);color:#fff}
            .admin-topbar a.navbar-brand{color:#fff;text-decoration:none;font-weight:700}
            .admin-topbar .nav-link{color:rgba(255,255,255,0.85);text-decoration:none;margin-right:12px}
            .admin-sidebar{width:220px;min-width:220px;padding-top:12px;background:var(--sidebar-bg);border-right:1px solid #e9ecef}
            .admin-main{padding:20px;background:#fff;min-height:calc(100vh - 56px)}
            .nav-link{color:#333;padding:10px 12px;display:block;border-radius:6px}
            .nav-link:hover{background:rgba(0,0,0,0.03);color:#000}
            .nav-link.active{background:var(--brand);color:#fff}
            .sidebar-inner h6{text-transform:uppercase;font-size:12px;color:var(--muted);margin-bottom:8px}
            .seat{display:inline-flex;align-items:center;justify-content:center;width:44px;height:44px;border:1px solid #ddd;border-radius:6px;margin:4px}
            .seat.occupied{background:#b0b0b0;color:#fff}
            .seat.business{background:#ffd700}
            .seat.economy{background:#87CEEB}
            .card{border-radius:8px;border:1px solid #e9ecef}
            .badge.bg-success{background:#28a745}
            .badge.bg-primary{background:#0d6efd}
            .badge.bg-warning{background:#ffc107;color:#212529}
            .badge.bg-danger{background:#dc3545}
            table.table{width:100%;border-collapse:collapse}
            .table thead th{background:#f8f9fa}
            @media (max-width:768px){.admin-sidebar{position:fixed;left:-260px;top:56px;z-index:1050}.admin-sidebar.open{left:0}}
        </style>
        <!-- Load Bootstrap JS deferred to allow modal usage from AJAX -->
        <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Admin global JS (sidebar toggle, helpers) -->
        <script defer th:src="@{/admin/js/admin.js}" src="/admin/js/admin.js"></script>
    </th:block>
</head>
<body>

<!-- admin top header fragment -->
<th:block th:fragment="topbar">
    <header class="admin-topbar">
        <div class="container-fluid d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center gap-3">
                <button id="sidebarToggle" class="btn btn-light d-md-none">‚ò∞</button>
                <a class="navbar-brand" th:href="@{/}">BookingTicket</a>
                <nav class="d-none d-md-block">
                    <ul class="nav d-flex" style="gap:12px;list-style:none;margin:0;padding:0;">
                        <li><a class="nav-link" th:href="@{/}">Home</a></li>
                        <li><a class="nav-link" th:href="@{/dashboard}">Dashboard</a></li>
                    </ul>
                </nav>
            </div>
            <div class="d-flex align-items-center">
                <div class="me-3 text-end">
                    <div class="small text-muted" style="color:rgba(255,255,255,0.7)">Admin</div>
                    <div class="fw-semibold" th:text="${#authentication?.name ?: 'Guest'}" style="color:#fff">Admin</div>
                </div>
                <a class="btn btn-outline-light" th:href="@{/logout}" th:if="${#authentication != null}">Logout</a>
                <a class="btn btn-light" th:href="@{/login}" th:if="${#authentication == null}">Login</a>
            </div>
        </div>
    </header>
</th:block>

<!-- left sidebar fragment -->
<th:block th:fragment="sidebar(active)">
    <aside class="admin-sidebar">
        <div class="sidebar-inner px-2 py-3">
            <div class="mb-3 px-2">
                <h6>Admin Menu</h6>
            </div>
            <ul class="nav flex-column gap-1">
                <li class="nav-item"><a class="nav-link rounded" th:classappend="${#strings.equals(active,'dashboard')} ? ' active' : ''" th:href="@{/admin/dashboard}">üìä Dashboard</a></li>
                <li class="nav-item"><a class="nav-link rounded" th:classappend="${#strings.equals(active,'flights')} ? ' active' : ''" th:href="@{/admin/flights}">‚úàÔ∏è Flights</a></li>
                <li class="nav-item"><a class="nav-link rounded" th:classappend="${#strings.equals(active,'airplanes')} ? ' active' : ''" th:href="@{/admin/airplanes}">üõ©Ô∏è Airplanes</a></li>
                <li class="nav-item"><a class="nav-link rounded" th:classappend="${#strings.equals(active,'seats')} ? ' active' : ''" th:href="@{/admin/seats}">üí∫ Seats</a></li>
                <li class="nav-item"><a class="nav-link rounded" th:classappend="${#strings.equals(active,'passengers')} ? ' active' : ''" th:href="@{/admin/passengers}">üë• Passengers</a></li>
                <li class="nav-item"><a class="nav-link rounded" th:href="@{/}">‚Ü©Ô∏è Back to Site</a></li>
            </ul>
        </div>
    </aside>
</th:block>

</body>
</html>
